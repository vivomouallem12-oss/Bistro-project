<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane prefWidth="1200" prefHeight="650"
            xmlns="http://javafx.com/javafx/23.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="gui.ReservationController"
            style="-fx-background-color: linear-gradient(to bottom, #0e1320, #111b34);">

    <!-- ================= TOP BAR ================= -->
    <top>
        <HBox alignment="CENTER_RIGHT" spacing="12"
              style="-fx-padding: 14 20;">
            <Button fx:id="refreshBtn"
                    text="←"
                    onAction="#back"
                    style="-fx-background-radius: 12;
                           -fx-background-color: #2b2f45;
                           -fx-text-fill: white;"/>
            <Button fx:id="refreshBtn"
                    text="⟲"
                    onAction="#refresh"
                    style="-fx-background-radius: 12;
                           -fx-background-color: #2b2f45;
                           -fx-text-fill: white;"/>

            <Button fx:id="exitBtn"
                    text="⏻"
                    onAction="#exit"
                    style="-fx-background-radius: 12;
                           -fx-background-color: #8a1b1b;
                           -fx-text-fill: white;
                           -fx-font-weight: bold;"/>
        </HBox>
    </top>

    <!-- ================= MAIN CONTENT ================= -->
    <center>
        <VBox alignment="TOP_CENTER" spacing="30"
              style="-fx-padding: 30;">

            <!-- ===== HEADER ===== -->
            <VBox alignment="CENTER" spacing="6"
                  prefWidth="900"
                  style="-fx-padding: 26 40;
                         -fx-background-radius: 30;
                         -fx-background-color: linear-gradient(to right, #5240d0, #e3a628);
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.45), 25, 0.35, 0, 6);">

                <Label text="Table Reservation"
                       style="-fx-text-fill: white;
                              -fx-font-size: 30;
                              -fx-font-weight: bold;"/>

                <Label text="Book or manage your reservation"
                       style="-fx-text-fill: #eeeeee;
                              -fx-font-size: 14;"/>
            </VBox>

            <!-- ===== CARDS ===== -->
            <HBox alignment="CENTER" spacing="30">

                <!-- ===== NEW RESERVATION ===== -->
                <VBox spacing="14" prefWidth="360"
                      style="-fx-padding: 22;
                             -fx-background-radius: 22;
                             -fx-background-color: #2b2f45;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.35), 18, 0.3, 0, 5);">

                    <Label text="New Reservation"
                           style="-fx-text-fill: white;
                                  -fx-font-size: 18;
                                  -fx-font-weight: bold;"/>

                    <!-- Guests -->
                    <VBox alignment="CENTER" spacing="6">
                        <Label text="Guests" style="-fx-text-fill: #cfcfcf;"/>
                        <HBox alignment="CENTER" spacing="10">
                            <Button fx:id="minusGuestBtn" text="−" onAction="#decGuests"/>
                            <Label fx:id="guestCountLabel" text="2"
                                   prefWidth="30" alignment="CENTER"
                                   style="-fx-text-fill: white;"/>
                            <Button fx:id="plusGuestBtn" text="+" onAction="#incGuests"/>
                        </HBox>
                    </VBox>

                    <!-- Date -->
                    <VBox spacing="5">
                        <Label text="Date" style="-fx-text-fill: #cfcfcf;"/>
                        <DatePicker fx:id="datePicker"/>
                    </VBox>

                    <!-- Time -->
                    <VBox spacing="5">
                        <Label text="Time" style="-fx-text-fill: #cfcfcf;"/>
                        <ComboBox fx:id="timeSelect">
                            <items>
                                <FXCollections fx:factory="observableArrayList">
                                    <String fx:value="17:00"/>
                                    <String fx:value="17:30"/>
                                    <String fx:value="18:00"/>
                                    <String fx:value="18:30"/>
                                    <String fx:value="19:00"/>
                                    <String fx:value="19:30"/>
                                    <String fx:value="20:00"/>
                                    <String fx:value="20:30"/>
                                    <String fx:value="21:00"/>
                                    <String fx:value="21:30"/>
                                </FXCollections>
                            </items>
                        </ComboBox>
                    </VBox>

                    <!-- Inputs -->
                    <TextField fx:id="nameField" promptText="Name"/>
                    <TextField fx:id="phoneField" promptText="Phone"/>
                    <TextField fx:id="emailField" promptText="Email"/>

                    <Button fx:id="orderBtn"
                            text="Reserve Table"
                            onAction="#handleOrder"
                            maxWidth="Infinity"
                            style="-fx-background-radius: 14;
                                   -fx-background-color: #5240d0;
                                   -fx-text-fill: white;
                                   -fx-font-size: 15;
                                   -fx-font-weight: bold;"/>

                    <Label fx:id="orderStatusLabel"
                           style="-fx-text-fill: #ffb74d;"/>

                    <HBox fx:id="suggestedTimesBox" spacing="6"/>
                </VBox>

                <!-- ===== EXISTING RESERVATION ===== -->
                <VBox spacing="16" prefWidth="360"
                      style="-fx-padding: 22;
                             -fx-background-radius: 22;
                             -fx-background-color: #403628;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.35), 18, 0.3, 0, 5);">

                    <Label text="Existing Reservation"
                           style="-fx-text-fill: white;
                                  -fx-font-size: 18;
                                  -fx-font-weight: bold;"/>

                    <TextField fx:id="confirmationCodeField"
                               promptText="Confirmation Code"/>

                    <Button fx:id="checkReservationBtn"
                            text="View Reservation / Bill"
                            onAction="#checkCode"
                            maxWidth="Infinity"
                            style="-fx-background-radius: 14;
                                   -fx-background-color: #2b2f45;
                                   -fx-text-fill: white;
                                   -fx-font-size: 14;"/>

                    <Label fx:id="codeStatusLabel"
                           style="-fx-text-fill: #ffb74d;"/>

                    <Label fx:id="lostCode"
                           text="Lost code?"
                           onMouseClicked="#lostCode"
                           style="-fx-text-fill: #cfcfcf;
                                  -fx-font-style: italic;"/>

                    <VBox fx:id="orderDetailsBox" spacing="6"/>
                </VBox>

            </HBox>
        </VBox>
    </center>

</BorderPane>
